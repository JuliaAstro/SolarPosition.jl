<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Refraction Algorithms · SolarPosition.jl</title><meta name="title" content="Refraction Algorithms · SolarPosition.jl"/><meta property="og:title" content="Refraction Algorithms · SolarPosition.jl"/><meta property="twitter:title" content="Refraction Algorithms · SolarPosition.jl"/><meta name="description" content="Documentation for SolarPosition.jl."/><meta property="og:description" content="Documentation for SolarPosition.jl."/><meta property="twitter:description" content="Documentation for SolarPosition.jl."/><meta property="og:url" content="https://JuliaSolarPV.github.io/SolarPosition.jl/refraction/"/><meta property="twitter:url" content="https://JuliaSolarPV.github.io/SolarPosition.jl/refraction/"/><link rel="canonical" href="https://JuliaSolarPV.github.io/SolarPosition.jl/refraction/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SolarPosition.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">SolarPosition.jl</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/basic/">Basic Example</a></li><li><a class="tocitem" href="../examples/plotting/">Using the Makie.jl plotting extension</a></li></ul></li><li><a class="tocitem" href="../reference/">API reference</a></li><li><a class="tocitem" href="../algorithms/">Positioning Algorithms</a></li><li class="is-active"><a class="tocitem" href>Refraction Algorithms</a><ul class="internal"><li><a class="tocitem" href="#no-refraction"><span>NoRefraction</span></a></li><li><a class="tocitem" href="#hughes-refraction"><span>Hughes</span></a></li></ul></li><li><a class="tocitem" href="../deltat/">Delta T (ΔT)</a></li><li><a class="tocitem" href="../literature/">Literature</a></li><li><a class="tocitem" href="../contributing/">Contributing guidelines</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Refraction Algorithms</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Refraction Algorithms</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaSolarPV/SolarPosition.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaSolarPV/SolarPosition.jl/blob/main/docs/src/refraction.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="refraction-algorithms"><a class="docs-heading-anchor" href="#refraction-algorithms">Refraction Algorithms</a><a id="refraction-algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#refraction-algorithms" title="Permalink"></a></h1><p>Atmospheric refraction correction algorithms available in SolarPosition.jl.</p><p>Atmospheric refraction causes the apparent position of the sun to differ from its true geometric position. This effect is most pronounced near the horizon and can be corrected using various atmospheric models.</p><table><tr><th style="text-align: right">Algorithm</th><th style="text-align: right">Reference</th><th style="text-align: right">Typical Accuracy</th><th style="text-align: right">Atmospheric Parameters</th><th style="text-align: right">Status</th></tr><tr><td style="text-align: right">NoRefraction</td><td style="text-align: right">N/A</td><td style="text-align: right">N/A</td><td style="text-align: right">None</td><td style="text-align: right">✅</td></tr><tr><td style="text-align: right">Hughes</td><td style="text-align: right">[<a href="../literature/#Hug85">Hug85</a>]</td><td style="text-align: right">~0.1&#39; (arcmin)</td><td style="text-align: right">Pressure, Temperature</td><td style="text-align: right">✅</td></tr></table><p>To calculate refraction, we can use the <code>refraction</code> function:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SolarPosition.Refraction.refraction" href="#SolarPosition.Refraction.refraction"><code>SolarPosition.Refraction.refraction</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">refraction(model::RefractionAlgorithm, elevation::T) where {T&lt;:AbstractFloat}</code></pre><p>Apply atmospheric refraction correction to the given elevation angle(s).</p><p><strong>Arguments</strong></p><ul><li><code>model::RefractionAlgorithm</code>: Refraction model to use (e.g., <code>HUGHES()</code>)</li><li><code>elevation::T</code>: True (unrefracted) solar elevation angle in degrees</li></ul><p><strong>Returns</strong></p><ul><li>Refraction correction in degrees to be added to the elevation angle</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using SolarPosition
hughes = HUGHES(101325.0, 15.0)  # 15°C temperature
elevation = 30.0  # 30 degrees
correction = refraction(hughes, elevation)
apparent_elevation = elevation + correction</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSolarPV/SolarPosition.jl/blob/af82e0ab31c2eb8e05aed5cdc349adb01047091f/src/Refraction/Refraction.jl#L42-L62">source</a></section></article><p>This function is typically used internally by the <code>solar_position</code> function when a refraction algorithm is specified.</p><h2 id="no-refraction"><a class="docs-heading-anchor" href="#no-refraction">NoRefraction</a><a id="no-refraction-1"></a><a class="docs-heading-anchor-permalink" href="#no-refraction" title="Permalink"></a></h2><p>The default behavior - no atmospheric refraction correction is applied.</p><p>When using <code>NoRefraction()</code> (the default), the <code>solar_position</code> function returns a <code>SolPos</code> struct containing only the true geometric angles (azimuth, elevation, zenith).</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SolarPosition.Refraction.NoRefraction" href="#SolarPosition.Refraction.NoRefraction"><code>SolarPosition.Refraction.NoRefraction</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NoRefraction &lt;: RefractionAlgorithm</code></pre><p>Indicates that no atmospheric refraction correction should be applied.</p><p>This is the default refraction setting for solar position calculations. When used, only basic solar position (azimuth, elevation, zenith) is computed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSolarPV/SolarPosition.jl/blob/af82e0ab31c2eb8e05aed5cdc349adb01047091f/src/Refraction/Refraction.jl#L32-L39">source</a></section></article><h2 id="hughes-refraction"><a class="docs-heading-anchor" href="#hughes-refraction">Hughes</a><a id="hughes-refraction-1"></a><a class="docs-heading-anchor-permalink" href="#hughes-refraction" title="Permalink"></a></h2><p>The Hughes refraction model accounts for atmospheric pressure and temperature effects.</p><p>This model was developed by [<a href="../literature/#Hug85">Hug85</a>] and is used in the SUNAEP software [<a href="../literature/#Zim81">Zim81</a>]. It&#39;s also the basis for the refraction correction in NOAA&#39;s solar position calculator (using fixed pressure of 101325 Pa and temperature of 10°C).</p><p>When using a refraction algorithm like <code>Hughes()</code>, the <code>solar_position</code> function returns an <code>ApparentSolPos</code> struct containing both true and apparent angles.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SolarPosition.Refraction.HUGHES" href="#SolarPosition.Refraction.HUGHES"><code>SolarPosition.Refraction.HUGHES</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct HUGHES{T} &lt;: RefractionAlgorithm</code></pre><p>Hughes refraction model.</p><p>This function was developed by G. Hughes [1] and was used in the SUNAEP software [2].</p><p>It is also used to calculate the refraction correction in the NOAA solar position algorithm using a fixed pressure of 101325 Pa and a temperature of 10 degrees Celsius.</p><p><strong>Fields</strong></p><ul><li><p><code>pressure::Any</code>: Annual average atmospheric pressure [Pascal]</p></li><li><p><code>temperature::Any</code>: Annual average temperature [°C]</p></li></ul><p><strong>Constructor</strong></p><ul><li><code>HUGHES()</code>: Uses default parameters: pressure = 101325 Pa, temperature = 12 °C</li><li><code>HUGHES(pressure, temperature)</code>: Specify custom pressure [Pa] and temperature [°C]</li></ul><p><strong>Notes</strong></p><p>The equation to calculate the refraction correction is given by:</p><p>For 5° &lt; elevation ≤ 90°:</p><p class="math-container">\[\frac{58.1}{\tan(el)} - \frac{0.07}{\tan(el)^3} + \frac{8.6 \times 10^{-5}}{\tan(el)^5}\]</p><p>For -0.575° &lt; elevation ≤ 5°:</p><p class="math-container">\[el \cdot (-518.2 + el \cdot (103.4 + el \cdot (-12.79 + el \cdot 0.711))) + 1735\]</p><p>For elevation ≤ -0.575°:</p><p class="math-container">\[\frac{-20.774}{\tan(el)}\]</p><p>where <code>el</code> is the true (unrefracted) solar elevation angle.</p><p>The result is then corrected for temperature and pressure:</p><p class="math-container">\[\text{Refract} \times \frac{283}{273 + T} \times \frac{P}{101325} \times \frac{1}{3600}\]</p><p><strong>Literature</strong></p><p>This function was developed by [<a href="../literature/#Hug85">Hug85</a>] and was used in the SUNAEP software [<a href="../literature/#Zim81">Zim81</a>]. It is also used to calculate the refraction correction in the NOAA solar position algorithm using a fixed pressure of 101325 Pa and a temperature of 10 degrees Celsius.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using SolarPosition

# Create Hughes refraction model with default parameters
hughes = HUGHES()

# Or specify custom atmospheric conditions
hughes_custom = HUGHES(101325.0, 25.0)  # 25°C temperature

# Apply refraction correction to elevation angle
elevation = 30.0  # degrees
refraction_correction = refraction(hughes, elevation)
apparent_elevation = elevation + refraction_correction</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSolarPV/SolarPosition.jl/blob/af82e0ab31c2eb8e05aed5cdc349adb01047091f/src/Refraction/hughes.jl#L1-L65">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../algorithms/">« Positioning Algorithms</a><a class="docs-footer-nextpage" href="../deltat/">Delta T (ΔT) »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 15 October 2025 00:36">Wednesday 15 October 2025</span>. Using Julia version 1.12.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
