"""Expected values for sunrise, sunset, and transit times."""

using DataFrames
using TimeZones
using Dates

function parse_zdt(s::AbstractString)
    dot_idx = findfirst('.', s)
    if dot_idx !== nothing
        truncated = s[1:(dot_idx+3)]
        dt = DateTime(truncated, "yyyy-mm-dd HH:MM:SS.s")
    else
        dt = DateTime(s, "yyyy-mm-dd HH:MM:SS")
    end
    return ZonedDateTime(dt, tz"UTC")
end

function expected_srt_spa()

    # Location metadata
    locations = ["New_York_US", "London_UK", "Tokyo_Japan", "Sydney_Australia"]
    latitudes = [40.7128, 51.5074, 35.6762, -33.8688]
    longitudes = [-74.006, -0.1278, 139.6503, 151.2093]
    timezones =
        [tz"America/New_York", tz"Europe/London", tz"Asia/Tokyo", tz"Australia/Sydney"]

    # Test dates (same for all locations)
    test_dates = [
        "1996-07-05 00:00:00",
        "2004-12-04 00:00:00",
        "2020-03-21 00:00:00",
        "2020-06-21 00:00:00",
        "2020-09-21 00:00:00",
        "2020-12-21 00:00:00",
    ]

    # Expected values for each location
    sunrise_times = [
        # New York
        [
            "1996-07-05 09:30:54.380199168",
            "2004-12-04 12:04:04.639789312",
            "2020-03-21 10:56:54.830877952",
            "2020-06-21 09:25:06.693053952",
            "2020-09-21 10:43:02.892866048",
            "2020-12-21 12:16:48.148741888",
        ],
        # London
        [
            "1996-07-05 03:50:46.043831296",
            "2004-12-04 07:48:16.079270784",
            "2020-03-21 06:00:05.987096576",
            "2020-06-21 03:43:10.799917056",
            "2020-09-21 05:45:33.315894528",
            "2020-12-21 08:03:58.325044992",
        ],
        # Tokyo
        [
            "1996-07-04 19:31:28.130640512",
            "2004-12-03 21:36:02.488217344",
            "2020-03-20 20:42:17.556928768",
            "2020-06-20 19:26:07.847698688",
            "2020-09-20 20:29:16.600558848",
            "2020-12-20 21:47:44.652873728",
        ],
        # Sydney
        [
            "1996-07-04 21:00:30.037653504",
            "2004-12-03 18:37:01.157537024",
            "2020-03-20 19:59:51.812865536",
            "2020-06-20 21:00:14.617065472",
            "2020-09-20 19:44:42.350011648",
            "2020-12-20 18:41:21.317379072",
        ],
    ]

    sunset_times = [
        # New York
        [
            "1996-07-06 00:30:23.809883008",
            "2004-12-04 21:28:38.854715776",
            "2020-03-21 23:09:46.691358208",
            "2020-06-22 00:30:37.694590208",
            "2020-09-21 22:53:58.433142784",
            "2020-12-21 21:32:03.377268736",
        ],
        # London
        [
            "1996-07-05 20:18:58.343843072",
            "2004-12-04 15:53:10.971877760",
            "2020-03-21 18:16:00.697600000",
            "2020-06-21 20:21:38.346121984",
            "2020-09-21 18:00:15.952219648",
            "2020-12-21 15:53:39.269454592",
        ],
        # Tokyo
        [
            "1996-07-05 10:00:42.207563520",
            "2004-12-04 07:27:49.974843008",
            "2020-03-21 08:53:57.284716288",
            "2020-06-21 10:00:32.410253824",
            "2020-09-21 08:39:47.587831296",
            "2020-12-21 07:31:45.839441664",
        ],
        # Sydney
        [
            "1996-07-05 06:58:51.760933888",
            "2004-12-04 08:53:55.191936512",
            "2020-03-21 08:05:00.945823488",
            "2020-06-21 06:53:55.522446592",
            "2020-09-21 07:50:50.757704448",
            "2020-12-21 09:05:39.239643904",
        ],
    ]

    transit_times = [
        # New York
        [
            "1996-07-05 17:00:39.424299136",
            "2004-12-04 16:46:28.140942336",
            "2020-03-21 17:03:00.048780032",
            "2020-06-21 16:57:58.659059456",
            "2020-09-21 16:48:51.131698944",
            "2020-12-21 16:54:25.644724480",
        ],
        # London
        [
            "1996-07-05 12:05:06.580566528",
            "2004-12-04 11:50:52.328637568",
            "2020-03-21 12:07:32.943177984",
            "2020-06-21 12:02:25.196525824",
            "2020-09-21 11:53:24.703958528",
            "2020-12-21 11:58:48.749525760",
        ],
        # Tokyo
        [
            "1996-07-05 02:45:55.871835776",
            "2004-12-04 02:31:36.108900736",
            "2020-03-21 02:48:33.117014016",
            "2020-06-21 02:43:13.350864384",
            "2020-09-21 02:34:26.180623616",
            "2020-12-21 02:39:30.416156160",
        ],
        # Sydney
        [
            "1996-07-05 01:59:41.381778560",
            "2004-12-04 01:45:21.169291776",
            "2020-03-21 02:02:19.528416512",
            "2020-06-21 01:56:58.768770816",
            "2020-09-21 01:48:12.700953600",
            "2020-12-21 01:53:15.297964288",
        ],
    ]

    return DataFrame(
        location = repeat(locations, inner = length(test_dates)),
        date = repeat(parse_zdt.(test_dates), length(locations)),
        sunrise = vcat([parse_zdt.(sr) for sr in sunrise_times]...),
        sunset = vcat([parse_zdt.(ss) for ss in sunset_times]...),
        transit = vcat([parse_zdt.(tr) for tr in transit_times]...),
        latitude = repeat(latitudes, inner = length(test_dates)),
        longitude = repeat(longitudes, inner = length(test_dates)),
        timezone = repeat(timezones, inner = length(test_dates)),
        delta_t = fill(67.0, length(locations) * length(test_dates)),
    )
end
